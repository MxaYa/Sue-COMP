<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CRUD Usuários</title>
</head>
<body>
  <h1>CRUD de Usuários</h1>

  <form action="/editar_usuario" method="POST">
    <label for="nome">Nome:</label>
    <input type="text" id="nome" name="nome" required>
    <br>
    <label for="telefone">Telefone:</label>
    <input type="text" id="telefone" name="telefone" required>
    <br>
    <label for="email">Email:</label>
    <input type="email" id="email" name="email" required>
    <br>
    <label for="cpf">CPF:</label>
    <input type="text" id="cpf" name="cpf" required>
    <br>
    <label for="endereco_id">Endereço ID:</label>
    <input type="text" id="endereco_id" name="endereco_id" required>
    <br>
    <button type="submit" name="action" value="alterar">Alterar</button>
    <button type="submit" name="action" value="incluir">Incluir</button>
    <input type="hidden" id="id_usuario" name="id_usuario">
  </form>

  
  <h2>Relação de Usuários Cadastrados</h2>
  <table border="1">
    <thead>
      <tr>
        <th>Nome</th>
        <th>Telefone</th>
        <th>Email</th>
        <th>CPF</th>
        <th>Endereço ID</th>
        <th>Ações</th>
      </tr>
    </thead>
    <tbody>
      <% usuarios.forEach(function(usuario) { %>
      <tr>
        <td><%= usuario.nome %></td>
        <td><%= usuario.telefone %></td>
        <td><%= usuario.email %></td>
        <td><%= usuario.cpf %></td>
        <td><%= usuario.endereco_id %></td>
        <td>
          <button onclick="preencherFormulario('<%= usuario.nome %>', '<%= usuario.telefone %>', '<%= usuario.email %>', '<%= usuario.cpf %>', '<%= usuario.endereco_id %>', '<%= usuario.id_usuario %>')">Editar</button>
          <form action="/excluir_usuario/<%= usuario.id_usuario %>" method="POST">
            <button type="submit">Excluir</button>
          </form>
        </td>
      </tr>
      <% }); %>
    </tbody>
  </table>

  <script>
    function preencherFormulario(nome, telefone, email, cpf, endereco_id, id_usuario) {
      document.getElementById("nome").value = nome;
      document.getElementById("telefone").value = telefone;
      document.getElementById("email").value = email;
      document.getElementById("cpf").value = cpf;
      document.getElementById("endereco_id").value = endereco_id;
      document.getElementById("id_usuario").value = id_usuario;
    }
  </script>
</body>
</html>
