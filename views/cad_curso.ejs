<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Coordenador</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.15/jquery.mask.min.js"></script>
</head>
<body>
    <div class="registration-form">        
        <form action="/editar_curso" method="POST">            
            <div class="form-icon">
                <span>SUE</span>
            </div>
            <center><h3>Cadastro de Curso</h3></center>
            <div class="form-group">
                <label for="Nome">Nome do Curso:</label>
                <input type="text" class="form-control item" id="Nome" name="nome_curso" placeholder="Nome" required />
            </div>
            <div class="form-group">
                <label for="Descrição">Descrição do Curso:</label>
                <input type="text" class="form-control item" id="Descrição" name="descricao_curso" placeholder="Descrição" required />
            </div>            
            <div class="form-group">
                <button type="submit" class="btn btn-block create-account" name="action" value="alterar">Alterar</button>
                <button type="submit" class="btn btn-block create-account" name="action" value="incluir">Incluir</button>
                <input type="hidden" id="id_curso" name="id_curso" />
            </div>
        </form>        
    </div>

    <h2>Relação de Cursos Cadastrados</h2>
    <table border="1">
        <thead>
            <tr>
                <th>Nome do Curso</th>
                <th>Descrição do Curso</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            <% cursos.forEach(function(curso) { %>
            <tr>
                <td><%= curso.nome_curso %></td>
                <td><%= curso.descricao_curso %></td>
                <td>
                    <button onclick="preencherFormulario('<%= curso.nome_curso %>', '<%= curso.descricao_curso %>', '<%= curso.id_curso %>')">Editar</button>
                    <form action="/excluir_curso/<%= curso.id_curso %>" method="POST" onsubmit="return confirm('Tem certeza que deseja excluir este curso?');">
                        <button type="submit">Excluir</button>
                    </form>
                </td>
            </tr>
            <% }); %>
        </tbody>
    </table>

    <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.15/jquery.mask.min.js"></script>
    <script src="assets/js/script.js"></script>
    <script>
        // Função para preencher os campos do formulário ao clicar em editar
        function preencherFormulario(nome_curso, descricao_curso, id_curso) {
            document.getElementById("Nome").value = nome_curso;
            document.getElementById("Descrição").value = descricao_curso;
            document.getElementById("id_curso").value = id_curso;
        }
    </script>
</body>
</html>
